<!DOCTYPE html>
<html>

<head>
<title>testy</title>
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width" />
<style type="text/css">
body {
       margin: 10px;
       padding: 10px;
     }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- <p id="user"></p> -->
<canvas id="myCanvas" width="4000" height="4000" >
<!-- <img id="menu" src="" style=”display: none;” alt="The Scream"> -->

</canvas>
<script>
//
// Promise.all([
//   fetch("http://localhost:3000/items/get"),
//   fetch("http://localhost:3000/contactlist/get"),
//   fetch("http://localhost:3000/itemgroup/get")
// ]).then(([items, contactlist, itemgroup]) => {
//     ReactDOM.render(
//         <Test items={items} contactlist={contactlist} itemgroup={itemgroup} />,
//         document.getElementById('overview');
//     );
// }).catch((err) => {
//     console.log(err);
// });

Promise.all([
            fetch("https://rhumn4n489.execute-api.us-east-2.amazonaws.com/dev/menu/healthy_food_menu").then(value => value.json()),
            fetch("https://rhumn4n489.execute-api.us-east-2.amazonaws.com/dev/jsons/healthy_food_menu").then(value => value.json())
            ])
            .then((value) => {
               // console.log(value[0]);
               // console.log(value[1]);

              //json response

               var o1 = value[0];
               var o2 = value[1];
               console.log(o1);
               console.log(o2);
               var url = o1.path;
               var urls = JSON.stringify(url);
               var cord = o2.jsons;
               var corde = JSON.parse(o2.jsons);
               console.log(cord);
               console.log(corde[1]);

               console.log(corde.length);
               console.log(corde[1][0]);




               var img = document.createElement("img");
               img.setAttribute("id", o1.menuID);
               img.setAttribute("src", o1.path);
               console.log(img);

               var c=document.getElementById("myCanvas");
               var ctx=c.getContext("2d");

               var canvas = document.getElementById('myCanvas');
               var context = canvas.getContext('2d');

               img.onload = function() {
                 ctx.drawImage(img,0,0);
                 context.beginPath();
                 for (i = 0; i < corde.length; i++) {
                     var cordeach = corde[i];
                     for (j = 0; j < cordeach.length; j++) {
                       context.rect(corde[i][0],corde[i][1],corde[i][2],corde[i][3]);
                     }
                 }
                 // context.rect(104,465,56,20);
                 // context.rect(corde[1][0],corde[1][1],corde[1][2],corde[1][3]);
                 // context.rect(695, 944, 62, 22);
                 context.lineWidth = 2;
                 context.strokeStyle = 'green';
                 context.stroke();
               };

            })
            .catch((err) => {
                console.log(err);
            });





// fetch('https://rhumn4n489.execute-api.us-east-2.amazonaws.com/dev/menu/chipotle')
//   .then(response => response.json())
//   .then(data => {console.log(data)
//
//   var s = JSON.stringify(data)
//   console.log(s)
//   var o = JSON.parse(s)
//   console.log(o)
//   var url = o.path;
//   console.log(url);
//   var urls = JSON.stringify(url);
//   console.log(urls);
//
//   var img = document.createElement("img");
//   img.setAttribute("id", o.menuID);
//   img.setAttribute("src", o.path);
//   console.log(img);
//
//   var c=document.getElementById("myCanvas");
//   var ctx=c.getContext("2d");
//
//   var canvas = document.getElementById('myCanvas');
//   var context = canvas.getContext('2d');
//
//   img.onload = function() {
//     ctx.drawImage(img,0,0);
//     context.beginPath();
//     context.rect(104,465,56,20);
//     context.rect(268,1413,90,20);
//     context.rect(695, 944, 62, 22);
//     context.lineWidth = 2;
//     context.strokeStyle = 'green';
//     context.stroke();
//   };
//
// //   document.getElementById("user").innerHTML =
// // "menu: " + o.menuID + " " +
// // "imageurl: " + o.path;
// });
</script>

</head>
</html>
